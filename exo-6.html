  
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Exo 6 Nadjim DJAMANI</title>
    <style>.entetetab{ font-weight: bold;}</style>
</head>
<body>
    <h1>Exo 6</h1>
    <input type="text" id="selectedCaracters">
    <div id="listPlayer"></div>
    
    <script>
    (function() {
        // Constants
        // https://api.myjson.com/bins/10dkyq
        const SERVER_URL = [
            { "firstname":"Paolo", "lastname":"Dybala", "team":"Juventus", "position":"attaquant" },
            { "firstname":"Cristiano", "lastname":"Ronaldo", "team":"Juventus", "position":"attaquant" },
            { "firstname":"Sergio", "lastname":"Ramos", "team":"Real Madrid", "position":"défenseur" },
            { "firstname":"Karim", "lastname":"Benzema", "team":"Real Madrid", "position":"attaquant" },
            { "firstname":"Lionel", "lastname":"Messi", "team":"Barcelone", "position":"milieu" },
            { "firstname":"Arturo", "lastname":"Vidal", "team":"Bayern Munich", "position":"milieu" },
            { "firstname":"Leonardo", "lastname":"Bonucci", "team":"Juventus", "position":"défenseur" },
            { "firstname":"Marco", "lastname":"Verratti", "team":"PSG", "position":"milieu" },
            { "firstname":"Gianluigi", "lastname":"Buffon", "team":"Juventus", "position":"gardien" },
            { "firstname":"Angel", "lastname":"Di Maria", "team":"PSG", "position":"milieu" }
        ];
        let listPlayersJSON = null ;

        // DOM targetting
        let selectedCaracters = document.getElementById('selectedCaracters');
        let divlistPlayer     = document.getElementById('listPlayer');

        // Events
        selectedCaracters.addEventListener('keyup', e => {
            //console.log(e.target.value);
            let newListPlayers = listPlayersJSON.filter(q => q.lastname.includes(e.target.value) || q.team.includes(e.target.value));
            showPlayersAvailable(newListPlayers);
        })

        function getAllPlayers() {
            /*
            fetch(SERVER_URL)
                .then(res => res.json())
                .then(players => {
                    listPlayersJSON = players;
                    console.log(listPlayersJSON);
            })*/
            listPlayersJSON = [];
            SERVER_URL.forEach(element => {
                listPlayersJSON.push(element);
            });
            
            showPlayersAvailable(listPlayersJSON);
        }
        
        function showPlayersAvailable(tabJson){
            divlistPlayer.innerHTML = '' ;
            //divlistPlayer.innerHTML += '<table><tr><td>Prénom</td><td>Nom</td><td>Equipe</td><td>Poste</td></tr>';
            let tableForPlayer = document.createElement('table');
                let tableTrHead = document.createElement('tr');
                tableTrHead.innerHTML = `<td scope="col" class="entetetab">Prénom</td>
                    <td scope="col" class="entetetab">Nom</td>
                    <td scope="col" class="entetetab">Equipe</td>
                    <td scope="col" class="entetetab">Poste</td> ` ; 
                tableForPlayer.appendChild(tableTrHead);            
            tabJson.forEach(element => {
                let tableTrBody = document.createElement('tr');
                tableTrBody.innerHTML = `<td scope="col">${element.firstname}</td>
                    <td scope="col">${element.lastname}</td>
                    <td scope="col">${element.team}</td>
                    <td scope="col">${element.position}</td>` ;
                tableForPlayer.appendChild(tableTrBody);
            });
            divlistPlayer.appendChild(tableForPlayer);

        }


        //init
        getAllPlayers();

    })();
    </script>
</body>
</html>