<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document exo Nadjim Djamani</title>
</head>
<body>
    <form action="" method="get" id="form">
        Name: <input type="text" size="10" name="name" id="txtName"/><br />
	    Password: <input type="password" size="10"  name="password" id="txtPassword"/><br />
	
	    <input type="submit" value="valider" id="btnValider" disabled/>
    </form>
</body>
<script>
    (function() {
        // Constants
        const NAME_MIN_LEN  = 3;
        const PWD_MIN_LEN   = 6;

        // DOM targetting
        let txtName         = document.getElementById('txtName');
        let txtPwd          = document.getElementById('txtPassword');
        let btnSubmit       = document.getElementById('btnValider');

        // Events
        txtName.addEventListener('keyup', e => checkConditions(e))
        txtPwd.addEventListener('keyup', e => checkConditions(e))

        // Functions
        function checkConditions(e) {
            let disabled = true; // bouton désactivé par défaut
            let isNameLengthOk  = txtName.value.length >= NAME_MIN_LEN;
            let isPwdLengthOk   = txtPwd.value.length >= PWD_MIN_LEN;

            if (isNameLengthOk && isPwdLengthOk) {
                //console.log('hasANumberValue', hasANumberValue(txtPwd.value));
                //console.log('HasAUpperCaseValue', HasAUpperCaseValue(txtPwd.value));
                disabled =  !(hasANumberValue(txtPwd.value) && HasAUpperCaseValue(txtPwd.value));
            }

            btnSubmit.disabled = disabled;
        }

        function hasANumberValue(str) {
            for(let i=0; i<str.length; i++)
                if (!isNaN(str[i])) return true;
            return false;
        }

        function HasAUpperCaseValue(str) {
            for(let i=0; i<str.length; i++)
                if (isUpperCase(str[i])) return true;
            return false;
        }

        // Variante sytaxique. La fonction est ici assignée à une variable. 
        // La fonction exécute une expression régulière (regexp) renvoyant
        // true si la totalité de la chaîne est en haut de casse.
        //function fléchée
        const isUpperCase = (str) => /^[A-Z]*$/.test(str);

            

    })();
</script>
</html>